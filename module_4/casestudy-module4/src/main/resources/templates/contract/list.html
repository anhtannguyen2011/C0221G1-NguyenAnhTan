<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="~{homePage :: homeHeader}">

    <style>
        .table th,.table td {
            text-align: center;
            font-size: 20px;
        }
    </style>
    <script>
        $(document).ready(function(){
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
</head>
<body>

<div th:insert="~{homePage :: bodyHeadder}">
</div>
<div th:insert="~{homePage :: headerLink}"></div>

<div class="container-fluid mt-5 border border-body">
    <div class="text-center">
        <h1>List Customer</h1>
        <!--    <p class="text-success">${message}</p>-->
    </div>
    <table class="table table-striped table-bordered" style="width:100%" id="tableStudent">
        <thead class="header" style="font-size: 20px;text-align: center">
        <tr>
            <th>No ID</th>
            <th>Contract ID</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Deposit</th>
            <th>Total Money</th>
            <th>Employee</th>
            <th>Customer</th>
            <th>Service</th>
            <td class="text-center"><a th:href="@{/contract/create-contract}" style="font-size: 20px; text-decoration: none"><i class="fas fa-plus-circle"></i>Add</a></td>
        </tr>
        </thead>
        <tbody style="font-size: 15px;text-align: center">
        <tr th:each="contractObj,loop : ${contractList}">
            <th th:text="${loop.count}"></th>
            <th th:text="${contractObj.contractId}"></th>
            <th th:text="${contractObj.contractStartDate}"></th>
            <th th:text="${contractObj.contractEndDate}"></th>
            <th th:text="${contractObj.contractDeposit}"></th>
            <th th:text="${contractObj.contractTotalMoney}"></th>
            <th th:text="${contractObj.employee.employeeName}"></th>
            <th th:text="${contractObj.customer.customerName}"></th>
            <th th:text="${contractObj.service.serviceName}"></th>
            <td>
                <a th:href="@{/contract/view(id=${contractObj.contractId})}"
                   class="btn btn-outline-info">View Detail</a>
                <a th:href="@{/contract/edit(id=${contractObj.contractId})}"
                   class="btn btn-outline-info">Edit</a>
                <button th:onclick="|setIdDelete(${contractObj.contractId})|" type="button" class="btn btn-outline-danger" data-toggle="modal" data-target="#exampleModal">
                    Delete
                </button>


                <div class="modal fade" id="exampleModal" tabindex="1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <form  th:action="@{/contract/delete}" method="get">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">DELETE</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    Are you sure you want to delete it?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <input type="submit" class="btn btn-danger btn-ok" id="delete" value="Delete">
                                    <input type="hidden" id="customer_id" name="id">
                                </div>
                            </div>
                        </form>
                    </div>

                </div>
            </td>

        </tr>
        </tbody>
    </table>
    <div style="text-align: center;font-size: 20px">
        <a th:href="@{'/contract/'(page=${contractList.number - 1})}" th:if="${contractList.hasPrevious()}">Previous</a>
        <span th:text="${contractList.number + 1}"></span>/<span th:text="${contractList.totalPages}"></span>
        <a th:href="@{'/contract/'(page=${contractList.number + 1})}" th:if="${contractList.hasNext()}">Next</a>
    </div>
</div>


<script>


    function setIdDelete(id) {
        document.getElementById("customer_id").value = id;
    }

</script>



</body>
</html>